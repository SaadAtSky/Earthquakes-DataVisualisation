<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Crytpocurrency Graph Demo</title>

    <!-- Include Plotly JavaScript library -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

    <!-- Include function that generates random crypto data -->
    <script src="currency_data.js"></script>
</head>
<body>

    <!-- Create DIVs to hold the charts -->
    <div id="bitcoinDiv" style="width:800px;height:400px;"></div>
    <div id="ethereumDiv" style="width:800px;height:400px;"></div>
    <div id="litecoinDiv" style="width:800px;height:400px;"></div>
    <div id="tronDiv" style="width:800px;height:400px;"></div>

    <script>
        //Plots randomly generate crypto data
        function plotData() {
            //Get test data
            let currencyData = getCurrencyData();

            //Work through the four currencies
            currencyData.forEach(currency => {
                //Specify how chart should be drawn
                let trace = {
                    x: currency.x,
                    y: currency.y,
                    mode: 'line',
                    name: currency.name,
                    marker: {
                        color: 'rgb(219, 64, 82)',
                        size: 12
                    }
                };

                //Get reference to Div where chart will be drawn
                let chartDiv = document.getElementById(currency.name + "Div");

                //Upper case the start of the currency name and create title of chart
                let chartTitle = currency.name.charAt(0).toUpperCase() + currency.name.slice(1);

                //Set up graph
                let layout = {
                    title: chartTitle,
                    xaxis: {
                        title: 'Time'
                    },
                    yaxis: {
                        title: 'Price'
                    }
                };

                //Data for graph is an array of lines for graph
                let data = [trace];

                //Plot data
                Plotly.newPlot(chartDiv, data, layout);
            });
        }

        //Plot data when window first loads
        window.onload = plotData;

        //Replot data every 1000 ms.
        setInterval(plotData, 1000);
    </script>

</body>
</html>

